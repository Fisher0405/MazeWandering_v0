System.register("chunks:///_virtual/FootprintPainter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,s,o,n,e,r,a;return{setters:[function(t){i=t.inheritsLoose},function(t){s=t.cclegacy,o=t._decorator,n=t.Color,e=t.Graphics,r=t.Vec3,a=t.Component}],execute:function(){var l;s._RF.push({},"5ed0cNHBlBCdLZ2VAI8Z05j","FootprintPainter",void 0);var c=o.ccclass,h=(o.property,n.WHITE);t("FootprintPainter",c("FootprintPainter")(l=function(t){function s(){for(var i,s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(i=t.call.apply(t,[this].concat(o))||this).g=null,i.lastPos=new r,i.dist=0,i}i(s,t);var o=s.prototype;return o.start=function(){this.g=this.getComponent(e)||this.node.addComponent(e),this.resetLast()},o.update=function(){var t,i=null==(t=this.node.parent)?void 0:t.getChildByName("Player");if(i){var s=i.position,o=s.x-this.lastPos.x,n=s.y-this.lastPos.y;this.dist+=Math.sqrt(o*o+n*n),this.dist>=16&&(this.drawDot(s),this.lastPos.set(s),this.dist=0)}},o.drawDot=function(t){this.g.circle(t.x,t.y,2.5),this.g.fillColor=h,this.g.fill()},o.clear=function(){this.g.clear(),this.resetLast()},o.resetLast=function(){var t,i,s=null==(t=this.node.parent)?void 0:t.getChildByName("Player");this.lastPos.set(null!=(i=null==s?void 0:s.position)?i:r.ZERO),this.dist=0},s}(a))||l);s._RF.pop()}}}));

System.register("chunks:///_virtual/GameTimer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,o,a,s,l,m,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Label,l=e.director,m=e.game,c=e.Component}],execute:function(){var u,h,T,f,p;o._RF.push({},"2db410d39xC34aM+Ix3Rg/w","GameTimer",void 0);var d=a.ccclass,g=a.property;e("GameTimer",(u=d("GameTimer"),h=g(s),u((p=t((f=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"timeLabel",p,n(t)),t.startTime=0,t}i(t,e);var o=t.prototype;return o.start=function(){this.timeLabel?(this.timeLabel.string="时间: 0.0 秒",l.on("timer-end",this.onTimerEnd,this),console.log("GameTimer：已绑定计时事件监听")):console.error("GameTimer：未绑定 timeLabel 组件！")},o.update=function(){if(this.timeLabel){console.log("GameTimer：正在计时中...");var e=(m.totalTime-this.startTime)/1e3;this.timeLabel.string="时间: "+e.toFixed(1)+" 秒"}},o.onTimerEnd=function(){var e=(m.totalTime-this.startTime)/1e3;console.log("GameTimer：停止计时，总用时：",e.toFixed(1),"秒"),this.scheduleOnce((function(){alert("你走出了迷宫！\n用时："+e.toFixed(1)+" 秒")}),0)},o.onDestroy=function(){l.off("timer-end",this.onTimerEnd,this),console.log("GameTimer：已解绑计时事件监听")},o.resetTimer=function(){this.startTime=0,this.timeLabel.string="时间: 0.0 秒",console.log("GameTimer：已重置")},t}(c)).prototype,"timeLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=f))||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./FootprintPainter.ts","./GameTimer.ts","./MazeData.ts","./PlayerPhysicsCtrl.ts","./TiledMapBuilder.ts"],(function(){return{setters:[null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MazeData.ts",["cc"],(function(r){var a,t;return{setters:[function(r){a=r.cclegacy,t=r._decorator}],execute:function(){r("generateMaze",f),a._RF.push({},"b847dQSCulJx4s9VFk2u2hl","MazeData",void 0);t.ccclass;var e=r("ROWS",15),o=r("COLS",21),n=r("TILE_SIZE",64),c=r("MAZE",[]),h=r("EXIT",{r:0,c:0});function f(){var a=[],t=[0,1,0,-1],n=[-1,0,1,0],f=1,l=1;(c=r("MAZE",Array.from({length:e},(function(){return Array(o).fill(1)}))))[l][f]=0;for(var g=function(r){for(var a=r.length-1;a>0;a--){var t=Math.floor(Math.random()*(a+1)),e=[r[t],r[a]];r[a]=e[0],r[t]=e[1]}};;){for(var u=[],p=0;p<4;p++){var s=f+2*t[p],v=l+2*n[p];s>0&&s<o-1&&v>0&&v<e-1&&1===c[v][s]&&u.push(p)}if(u.length){g(u);var M=u[0],i=f+t[M],R=f+2*t[M],y=l+2*n[M];c[l+n[M]][i]=0,c[y][R]=0,a.push([f,l]),f=R,l=y}else{if(!a.length)break;var d=a.pop();f=d[0],l=d[1]}}var m=[{type:"顶部",r:0,cRange:[0,o-1]},{type:"底部",r:e-1,cRange:[0,o-1]},{type:"左侧",rRange:[1,e-2],c:0},{type:"右侧",rRange:[1,e-2],c:o-1}],E=m[Math.floor(Math.random()*m.length)],_=0,I=0;"顶部"===E.type||"底部"===E.type?(_=E.r,I=Math.floor(Math.random()*(E.cRange[1]-E.cRange[0]+1))+E.cRange[0]):(_=Math.floor(Math.random()*(E.rRange[1]-E.rRange[0]+1))+E.rRange[0],I=E.c),c[_][I]=0,0===_?c[_+1][I]=0:_===e-1?c[_-1][I]=0:0===I?c[_][I+1]=0:I===o-1&&(c[_][I-1]=0);for(var S=[],A=0;A<o;A++)0===c[0][A]&&S.push({r:0,c:A});for(var D=0;D<o;D++)0===c[e-1][D]&&S.push({r:e-1,c:D});for(var O=1;O<e-1;O++)0===c[O][0]&&S.push({r:O,c:0});for(var T=1;T<e-1;T++)0===c[T][o-1]&&S.push({r:T,c:o-1});if(S.length>0){var b=Math.floor(Math.random()*S.length);0===(h=r("EXIT",S[b])).r||h.r===e-1||0===h.c||h.c,c[h.r][h.c]=0}else h=r("EXIT",{r:e-1,c:Math.floor(o/2)}),c[h.r][h.c]=0,c[h.r-1][h.c]=0}f();r("WORLD_BOUND",{left:0,right:o*n,top:-e*n,bottom:0});a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerPhysicsCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,s,o,n,r,a,h,c,l,u,d,y,p,E,T,v,m;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,s=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){n=i.cclegacy,r=i._decorator,a=i.Camera,h=i.Vec2,c=i.RigidBody2D,l=i.Collider2D,u=i.director,d=i.Contact2DType,y=i.input,p=i.Input,E=i.KeyCode,T=i.EventMouse,v=i.Vec3,m=i.Component}],execute:function(){var M,C,R,O,D,g,_;n._RF.push({},"8cbb29Cg+JFgqqkvTgbJpsp","PlayerPhysicsCtrl",void 0);var f=r.ccclass,P=r.property;i("PlayerPhysicsCtrl",(M=f("PlayerPhysicsCtrl"),C=P({tooltip:"移动速度（像素/秒）",min:1,max:500}),R=P({tooltip:"主摄像机（用于将鼠标/触屏坐标转换为世界坐标）",type:a}),M((g=t((D=function(i){function t(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=i.call.apply(i,[this].concat(n))||this,s(t,"speed",g,o(t)),s(t,"mainCamera",_,o(t)),t.body=void 0,t.collider=void 0,t.dirMask=0,t.LEFT=1,t.RIGHT=2,t.UP=4,t.DOWN=8,t.isWon=!1,t.touchStartPos=h.ZERO,t.isTouching=!1,t.moveDir=h.ZERO,t.isMouseControlled=!1,t.DIR_EPS=.001,t}e(t,i);var n=t.prototype;return n.start=function(){var i;(this.body=this.getComponent(c),this.collider=this.getComponent(l),this.body.group=2,this.collider.group=2,this.mainCamera)||(this.mainCamera=null==(i=u.getScene())?void 0:i.getComponentInChildren(a),this.mainCamera||console.error("PlayerPhysicsCtrl: 未找到主摄像机，请在属性面板中绑定"));this.body.gravityScale=0,this.body.linearDamping=1,this.bindInputEvents(),this.collider.on(d.BEGIN_CONTACT,this.onBeginContact,this),u.emit("timer-start")},n.update=function(i){var t=h.ZERO;if(this.moveDir.lengthSqr()>this.DIR_EPS)t=this.moveDir.normalize().multiplyScalar(this.speed);else if(0!==this.dirMask){var e=(this.dirMask&this.LEFT?-1:0)+(this.dirMask&this.RIGHT?1:0),s=(this.dirMask&this.UP?1:0)+(this.dirMask&this.DOWN?-1:0);0===e&&0===s||(t=new h(e,s).normalize().multiplyScalar(this.speed))}this.body.linearVelocity=t},n.bindInputEvents=function(){y.on(p.EventType.KEY_DOWN,this.onKeyDown,this),y.on(p.EventType.KEY_UP,this.onKeyUp,this),y.on(p.EventType.MOUSE_DOWN,this.onMouseDown,this),y.on(p.EventType.MOUSE_MOVE,this.onMouseMove,this),y.on(p.EventType.MOUSE_UP,this.onMouseUp,this),y.on(p.EventType.TOUCH_START,this.onTouchStart,this),y.on(p.EventType.TOUCH_MOVE,this.onTouchMove,this),y.on(p.EventType.TOUCH_END,this.onTouchEnd,this),y.on(p.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},n.onKeyDown=function(i){switch(this.isMouseControlled=!1,this.moveDir=h.ZERO,i.keyCode){case E.ARROW_LEFT:case E.KEY_A:this.dirMask|=this.LEFT;break;case E.ARROW_RIGHT:case E.KEY_D:this.dirMask|=this.RIGHT;break;case E.ARROW_UP:case E.KEY_W:this.dirMask|=this.UP;break;case E.ARROW_DOWN:case E.KEY_S:this.dirMask|=this.DOWN}},n.onKeyUp=function(i){switch(i.keyCode){case E.ARROW_LEFT:case E.KEY_A:this.dirMask&=~this.LEFT;break;case E.ARROW_RIGHT:case E.KEY_D:this.dirMask&=~this.RIGHT;break;case E.ARROW_UP:case E.KEY_W:this.dirMask&=~this.UP;break;case E.ARROW_DOWN:case E.KEY_S:this.dirMask&=~this.DOWN}},n.onMouseDown=function(i){this.isTouching||i.getButton()===T.BUTTON_LEFT&&(this.isMouseControlled=!0,this.isMouseControlled?(this.dirMask=0,this.calculateMouseDir(i)):this.moveDir=h.ZERO)},n.onMouseUp=function(i){i.getButton()==T.BUTTON_RIGHT&&(this.isMouseControlled=!1,this.moveDir=h.ZERO)},n.onMouseMove=function(i){this.isMouseControlled&&!this.isTouching&&this.mainCamera&&this.calculateMouseDir(i)},n.calculateMouseDir=function(i){if(this.mainCamera){var t,e;if(i instanceof T)t=i.getLocationX(),e=i.getLocationY();else{var s=i.getLocation();t=s.x,e=s.y}var o=new v(t,e,0),n=new v;this.mainCamera.screenToWorld(n,o);var r=this.node.worldPosition;this.moveDir=new h(n.x-r.x,n.y-r.y)}},n.onTouchStart=function(i){this.isMouseControlled=!1,this.isTouching=!0;var t=i.getLocation();this.touchStartPos=new h(t.x,t.y),this.dirMask=0,this.moveDir=h.ZERO},n.onTouchMove=function(i){if(this.isTouching){var t=i.getLocation(),e=new h(t.x,t.y);this.moveDir=e.subtract(this.touchStartPos)}},n.onTouchEnd=function(){this.isTouching=!1,this.touchStartPos=h.ZERO,this.moveDir=h.ZERO},n.onBeginContact=function(i,t,e){!this.isWon&&2===(null==t?void 0:t.group)&&t.node.name.startsWith("end_")&&this.checkPlayerReachEnd()},n.checkPlayerReachEnd=function(){this.isWon=!0,this.body.linearVelocity=h.ZERO,u.emit("timer-end")},t}(m)).prototype,"speed",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),_=t(D.prototype,"mainCamera",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=D))||O));n._RF.pop()}}}));

System.register("chunks:///_virtual/TiledMapBuilder.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MazeData.ts"],(function(e){var r,i,t,n,o,l,a,u,c,d,s,p,f,y,h,b,S,v,g,m;return{setters:[function(e){r=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.Node,u=e.SpriteFrame,c=e.Vec3,d=e.Sprite,s=e.UITransform,p=e.RigidBody2D,f=e.ERigidBody2DType,y=e.BoxCollider2D,h=e.Component},function(e){b=e.TILE_SIZE,S=e.ROWS,v=e.COLS,g=e.MAZE,m=e.EXIT}],execute:function(){var C,w,F,T,z,L,_,M,B,D,E,R,I;o._RF.push({},"36b32UkOqRNhJIv4K89Xn1G","TiledMapBuilder",void 0);var O=l.ccclass,x=l.property;e("TiledMapBuilder",(C=O("TiledMapBuilder"),w=x(a),F=x(a),T=x(u),z=x(u),L=x(u),C((B=r((M=function(e){function r(){for(var r,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return r=e.call.apply(e,[this].concat(o))||this,t(r,"floorLayer",B,n(r)),t(r,"wallLayer",D,n(r)),t(r,"floorSF",E,n(r)),t(r,"wallSF",R,n(r)),t(r,"endSF",I,n(r)),r}i(r,e);var o=r.prototype;return o.start=function(){this.buildFloor(),this.buildWall(),this.buildEnd()},o.gridCenter=function(e,r){return new c(r*b+b/2,-e*b-b/2,0)},o.createTile=function(e,r,i,t){var n=new a(e);n.position=i;var o=n.addComponent(d);o.spriteFrame=t,o.sizeMode=d.SizeMode.CUSTOM;var l=n.getComponent(s);return l.setAnchorPoint(.5,.5),l.setContentSize(b,b),r.addChild(n),n},o.buildFloor=function(){for(var e=0;e<S;e++)for(var r=0;r<v;r++)this.createTile("f_"+e+"_"+r,this.floorLayer,this.gridCenter(e,r),this.floorSF)},o.buildWall=function(){for(var e=0;e<S;e++)for(var r=0;r<v;r++)if(1===g[e][r]){var i=this.createTile("w_"+e+"_"+r,this.wallLayer,this.gridCenter(e,r),this.wallSF);i.addComponent(p).type=f.Static;var t=i.addComponent(y);t.size.set(b,b),t.friction=0,t.restitution=0}},o.buildEnd=function(){var e=this.createTile("end_"+m.r+"_"+m.c,this.floorLayer,this.gridCenter(m.r,m.c),this.endSF),r=e.addComponent(p);r.type=f.Static,r.gravityScale=0,r.fixedRotation=!0;var i=e.addComponent(y);i.size.set(b,b),i.friction=0,i.restitution=0,i.group=2,i.sensor=!0},r}(h)).prototype,"floorLayer",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=r(M.prototype,"wallLayer",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=r(M.prototype,"floorSF",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=r(M.prototype,"wallSF",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=r(M.prototype,"endSF",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=M))||_));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});